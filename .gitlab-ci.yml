---
build:
    tags: [dev-utils]
    stage: build
    before_script:
        - cargo --version
    script:
        - cargo build --release
        - cp target/release/poppy .
    artifacts:
        paths:
            - ./poppy

install-dev:
    tags: [dev-utils]
    stage: install
    needs:
        - job: build
          artifacts: true
    script:
        - cp ./poppy /usr/bin/
        - poppy --version
    artifacts:
        paths: 
            - ./poppy

package:
    tags: [dev-utils]
    stage: package
    needs:
        - job: build
          artifacts: true
    script:
        - tar -czvf poppy.tar.gz poppy

stages:
    - build
    - install
    - package
    
